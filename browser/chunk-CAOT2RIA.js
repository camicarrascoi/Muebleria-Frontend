import{a as q}from"./chunk-5DZZGDDZ.js";import{Aa as w,Bb as O,Cb as V,Da as _,Db as F,Eb as I,Fb as A,Gb as D,Hb as T,Jb as W,Ka as u,Kb as N,La as t,Lb as z,Ma as n,Na as g,Oa as C,Pa as S,Qa as d,Sa as r,Ta as x,Ua as y,X as s,Xa as f,Y as p,Ya as M,Za as b,a as v,pb as E,qb as P,ra as l,tb as k,va as h}from"./chunk-CQMFC4HS.js";function L(c,a){if(c&1){let e=C();t(0,"button",5),S("click",function(){s(e);let i=d();return p(i.abrirFormularioNuevo())}),r(1,"\u2795 Agregar material"),n()}}function j(c,a){c&1&&(t(0,"th"),r(1,"Acciones"),n())}function G(c,a){if(c&1&&(t(0,"li"),r(1),n()),c&2){let e=a.$implicit;l(),y(" ",e.nombre," ")}}function U(c,a){if(c&1){let e=C();t(0,"td")(1,"button",5),S("click",function(){s(e);let i=d().$implicit,o=d(2);return p(o.editarMaterial(i))}),r(2,"\u270F\uFE0F Editar"),n(),t(3,"button",5),S("click",function(){s(e);let i=d().$implicit,o=d(2);return p(o.eliminarMaterial(i.id))}),r(4,"\u{1F5D1}\uFE0F Eliminar"),n()()}}function R(c,a){if(c&1&&(t(0,"tr")(1,"td"),r(2),n(),t(3,"td"),r(4),n(),t(5,"td"),r(6),n(),t(7,"td"),r(8),n(),t(9,"td"),r(10),n(),t(11,"td")(12,"ul"),_(13,G,2,1,"li",8),n()(),_(14,U,5,0,"td",7),n()),c&2){let e=a.$implicit,m=d(2);l(2),x(e.nombre),l(2),x(e.tipo),l(2),x(e.descripcion),l(2),x(e.unidadDeMedida),l(2),x(e.stockActual),l(3),u("ngForOf",e.proveedorMateriales),l(),u("ngIf",m.esAdmin)}}function H(c,a){if(c&1&&(t(0,"table",6)(1,"thead")(2,"tr")(3,"th"),r(4,"Nombre"),n(),t(5,"th"),r(6,"Tipo"),n(),t(7,"th"),r(8,"Descripci\xF3n"),n(),t(9,"th"),r(10,"Unidad de Medida"),n(),t(11,"th"),r(12,"Stock Actual"),n(),t(13,"th"),r(14,"Proveedores"),n(),_(15,j,2,0,"th",7),n()(),t(16,"tbody"),_(17,R,15,7,"tr",8),n()()),c&2){let e=d();l(15),u("ngIf",e.esAdmin),l(2),u("ngForOf",e.materiales)}}function J(c,a){if(c&1){let e=C();t(0,"div",9)(1,"h3"),r(2),n(),t(3,"form",10),S("ngSubmit",function(){s(e);let i=d();return p(i.guardarMaterial())}),t(4,"label"),r(5," Nombre: "),t(6,"input",11),b("ngModelChange",function(i){s(e);let o=d();return M(o.materialSeleccionado.nombre,i)||(o.materialSeleccionado.nombre=i),p(i)}),n()(),g(7,"br"),t(8,"label"),r(9," Tipo: "),t(10,"input",12),b("ngModelChange",function(i){s(e);let o=d();return M(o.materialSeleccionado.tipo,i)||(o.materialSeleccionado.tipo=i),p(i)}),n()(),g(11,"br"),t(12,"label"),r(13," Descripci\xF3n: "),t(14,"input",13),b("ngModelChange",function(i){s(e);let o=d();return M(o.materialSeleccionado.descripcion,i)||(o.materialSeleccionado.descripcion=i),p(i)}),n()(),g(15,"br"),t(16,"label"),r(17," Unidad de Medida: "),t(18,"input",14),b("ngModelChange",function(i){s(e);let o=d();return M(o.materialSeleccionado.unidadDeMedida,i)||(o.materialSeleccionado.unidadDeMedida=i),p(i)}),n()(),g(19,"br"),t(20,"label"),r(21," Stock Actual: "),t(22,"input",15),b("ngModelChange",function(i){s(e);let o=d();return M(o.materialSeleccionado.stockActual,i)||(o.materialSeleccionado.stockActual=i),p(i)}),n()(),g(23,"br"),t(24,"label"),r(25," Proveedores (IDs separados por coma): "),t(26,"input",16),b("ngModelChange",function(i){s(e);let o=d();return M(o.proveedoresSeleccionados,i)||(o.proveedoresSeleccionados=i),p(i)}),n()(),g(27,"br"),t(28,"button",17),r(29,"\u{1F4BE} Guardar"),n(),t(30,"button",18),S("click",function(){s(e);let i=d();return p(i.cancelarFormulario())}),r(31,"\u274C Cancelar"),n()()()}if(c&2){let e=d();l(2),x(e.materialSeleccionado!=null&&e.materialSeleccionado.id?"Editar Material":"Agregar Material"),l(4),f("ngModel",e.materialSeleccionado.nombre),l(4),f("ngModel",e.materialSeleccionado.tipo),l(4),f("ngModel",e.materialSeleccionado.descripcion),l(4),f("ngModel",e.materialSeleccionado.unidadDeMedida),l(4),f("ngModel",e.materialSeleccionado.stockActual),l(4),f("ngModel",e.proveedoresSeleccionados)}}var B=class c{constructor(a,e){this.materialesService=a;this.authService=e}materiales=[];materialSeleccionado=null;proveedoresSeleccionados="";mostrarFormulario=!1;esAdmin=!1;ngOnInit(){this.cargarMateriales(),this.esAdmin=this.authService.isAdmin()}cargarMateriales(){this.materialesService.obtenerMateriales().subscribe({next:a=>{this.materiales=a},error:a=>console.error("Error al cargar materiales",a)})}abrirFormularioNuevo(){this.materialSeleccionado={id:null,nombre:"",tipo:"",descripcion:"",unidadDeMedida:"",stockActual:0,proveedorMateriales:[],materialMuebles:[]},this.mostrarFormulario=!0}editarMaterial(a){this.materialSeleccionado=v({},a),this.mostrarFormulario=!0}guardarMaterial(){this.materialSeleccionado&&(this.materialSeleccionado.id?this.materialesService.editarMaterial(this.materialSeleccionado.id,this.materialSeleccionado).subscribe({next:()=>{this.cargarMateriales(),this.cancelarFormulario()},error:a=>console.error("Error al actualizar material",a)}):this.materialesService.agregarMaterial(this.materialSeleccionado).subscribe({next:()=>{this.cargarMateriales(),this.cancelarFormulario()},error:a=>console.error("Error al crear material",a)}))}eliminarMaterial(a){confirm("\xBFEst\xE1s seguro de que deseas eliminar este material?")&&this.materialesService.eliminarMaterial(a).subscribe({next:()=>this.cargarMateriales(),error:e=>console.error("Error al eliminar material",e)})}cancelarFormulario(){this.mostrarFormulario=!1,this.materialSeleccionado=null}static \u0275fac=function(e){return new(e||c)(h(q),h(z))};static \u0275cmp=w({type:c,selectors:[["app-materiales"]],decls:7,vars:3,consts:[[1,"navbar"],[1,"acciones"],[3,"click",4,"ngIf"],["border","1",4,"ngIf"],["class","formulario-material",4,"ngIf"],[3,"click"],["border","1"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"formulario-material"],[3,"ngSubmit"],["type","text","name","nombre","required","",3,"ngModelChange","ngModel"],["type","text","name","tipo","required","",3,"ngModelChange","ngModel"],["type","text","name","descripcion","required","",3,"ngModelChange","ngModel"],["type","text","name","unidadDeMedida","required","",3,"ngModelChange","ngModel"],["type","number","name","stockActual","required","",3,"ngModelChange","ngModel"],["type","text","name","proveedores","placeholder","1,3,5",3,"ngModelChange","ngModel"],["type","submit"],["type","button",3,"click"]],template:function(e,m){e&1&&(t(0,"nav",0)(1,"span"),r(2,"Lista Materiales"),n()(),t(3,"div",1),_(4,L,2,0,"button",2),n(),_(5,H,18,2,"table",3)(6,J,32,7,"div",4)),e&2&&(l(4),u("ngIf",m.esAdmin),l(),u("ngIf",m.materiales.length>0),l(),u("ngIf",m.mostrarFormulario))},dependencies:[k,E,P,N,D,O,T,V,F,W,A,I],styles:["[_nghost-%COMP%]{display:block;background-color:#fdf6e3;padding:20px;font-family:Arial,sans-serif;font-size:18px;color:#333}.navbar[_ngcontent-%COMP%]{background-color:#8b5e3c;color:#fff;padding:15px 20px;font-size:22px;font-weight:700;border-radius:8px;margin-bottom:20px}.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#a86f4c;color:#fff;border:none;padding:12px 20px;font-size:18px;border-radius:6px;cursor:pointer;margin-bottom:20px}.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#935e3f}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}thead[_ngcontent-%COMP%]{background-color:wheat;color:#333;font-weight:700}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:12px;text-align:left}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff8ee}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#8b5e3c;color:#fff;border:none;padding:8px 12px;margin-right:5px;font-size:16px;border-radius:5px;cursor:pointer}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#6f442a}form[_ngcontent-%COMP%]{background-color:#fff4e6;padding:20px;border-radius:8px;max-width:600px;margin:20px auto;box-shadow:0 4px 8px #0000001a}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:15px;font-weight:700}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:10px;font-size:16px;margin-top:5px;border-radius:4px;border:1px solid #ccc}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:10px 18px;font-size:16px;border-radius:6px;margin-right:10px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049}"]})};export{B as MaterialesComponent};
